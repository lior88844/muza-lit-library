import{w as P}from"./with-props-B2_f2fEw.js";import{o as s,a as l,s as w}from"./chunk-DQRVZFIR-BNfO-z-U.js";import{u as M,a as A,M as k,b as C,S as E,c as R}from"./musicStore-BmPfGCfk.js";const L=({details:t,onAlbumClick:i})=>s.jsxs("div",{className:"album-details-card",children:[s.jsx("div",{className:"image-container",children:s.jsx("img",{src:t.imageSrc,alt:t.title,onClick:i})}),s.jsxs("div",{className:"info",children:[s.jsx("div",{className:"title",children:t.title}),s.jsx("div",{className:"artist",children:t.artist}),s.jsx("div",{className:"subtitle",children:t.genre&&`${t.genre} â€¢ `}),s.jsxs("div",{className:"buttons",children:[s.jsx("button",{className:"icon-button",children:s.jsx("span",{className:"icon icon-dots"})}),s.jsx("button",{className:"icon-button",children:s.jsx("span",{className:"icon icon-info"})}),s.jsx("button",{className:"icon-button",children:s.jsx("span",{className:"icon icon-plus"})}),s.jsx("button",{className:"icon-button",children:s.jsx("span",{className:"icon icon-shuffle",children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M16 3h5v5"}),s.jsx("path",{d:"M4 20l16-16"}),s.jsx("path",{d:"M4 4l5 5"}),s.jsx("path",{d:"M21 16v5h-5"}),s.jsx("path",{d:"M15 15l6 6"})]})})})]})]})]}),U=({details:t})=>s.jsxs("div",{className:"artist-details-card",children:[s.jsx("div",{className:"image-container",children:s.jsx("img",{src:t.imageSrc,alt:t.artistName})}),s.jsxs("div",{className:"info",children:[s.jsx("div",{className:"title",children:t.artistName}),s.jsxs("div",{className:"subtitle",children:[t.albumsCount," Albums"]})]})]}),B=P(function(){const{selectedSong:i,setSelectedSong:a,setSelectedPlaListOrAlbum:D}=M(),{newReleases:u,recentlyPlayed:n,artists:x,setNewReleases:h,setRecentlyPlayed:j,setArtists:g}=A(),[b,r]=l.useState(!0),[c,N]=l.useState(null),[f,v]=l.useState([]),p=w(),S=e=>{p("/routes/albumPage",{state:{album:e}})},o=()=>!i||!i.id?-1:n.findIndex(e=>e.id===i.id),y=()=>{const e=o();e<=0?a(n[n.length-1]):a(n[e-1])},d=()=>{const e=o();e===-1||e===n.length-1?a(n[0]):a(n[e+1])};return l.useEffect(()=>{fetch("/getAllData").then(e=>{if(!e.ok)fetch("./mockData/allData.json").then(m=>{if(!m.ok)throw new Error("Network response was not ok");return m.json()});else return e.json()}).then(e=>{h(e.albums.newReleases),j(e.songs),g(e.artists),v(e.sidebar.sections),e.songs.length>0&&a(e.songs[0]),r(!1)}).catch(e=>{N(e.message),r(!1)})},[]),b?s.jsx("p",{children:"Loading..."}):c?s.jsxs("p",{children:["Error: ",c]}):s.jsxs("div",{className:"body",children:[s.jsx(k,{logoSrc:"app/icons/icons/muza.svg",logoAlt:"Music Library",sections:f}),s.jsxs("div",{className:"content",children:[s.jsx(C,{}),s.jsxs("main",{children:[s.jsx("h1",{children:"Home"}),s.jsx("hr",{}),s.jsx("h2",{children:"New Releases"}),s.jsx("div",{className:"album-list",children:u.map(e=>s.jsx(L,{details:e,onAlbumClick:()=>S(e)},e.id))}),s.jsx("hr",{}),s.jsx("h2",{children:"Recently Played"}),s.jsx("div",{className:"song-list",children:n.map(e=>s.jsx(E,{details:e,onClick:()=>a(e),isPlaying:e.id===(i==null?void 0:i.id)},e.id))}),s.jsx("hr",{}),s.jsx("h2",{children:"Artists"}),s.jsx("div",{className:"album-list",children:x.map(e=>s.jsx(U,{details:e},e.id))}),i&&s.jsx(R,{details:{audioUrl:i.audioUrl||"",imageSrc:i.imageSrc||"",title:i.title,artist:i.artist||"",album:i.album||"",year:i.year||new Date().getFullYear(),isPlaying:i.isPlaying||!1,id:i.id},onUpdate:e=>a({...i,isPlaying:e.isPlaying,audioUrl:e.audioUrl}),onPrevious:y,onNext:d,onSongEnded:d})]})]})]})});export{B as default};
